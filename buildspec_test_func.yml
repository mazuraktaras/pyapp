version: 0.2
env:
  variables:
    SELENIUM_SERVER_URL: http://127.0.0.1:4444/wd/hub
    PASS_RATE: 100
    APP_TARGET_URL: http://52.91.166.81:8080
phases:
  install:
    commands:
      - docker pull  --quiet selenium/standalone-chrome:latest
  pre_build:
    commands:
      - docker run -d -p 4444:4444 -v /dev/shm:/dev/shm --name selenium selenium/standalone-chrome:latest
      - pip3 install selenium unittest-xml-reporting junitparser
      - echo "${APP_TARGET_URL} this is our ip"
  build:
    commands:
      - |
        python3 scripts/test_func.py \
          --selenium-server-url "${SELENIUM_SERVER_URL}" \
          --app-target-url "http://52.91.166.81:8080" \
          --output ./report.xml \
          --pass-rate "${PASS_RATE}"
reports:
  Selenium:
    file-format: JunitXml
    files:
      - ./report.xml
